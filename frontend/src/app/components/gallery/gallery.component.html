<div class="page-container">
  <!-- Hero Section -->
  <section id="accueil" class="hero-section">
    <div class="hero-content">
      <h1 class="hero-title">Galerie d'Art</h1>
      <p class="hero-subtitle">Découvrez mon univers artistique</p>
      <a href="#galerie" class="btn-hero">Explorer les œuvres</a>
    </div>
  </section>

  <!-- Présentation Section -->
  <app-presentation></app-presentation>

  <!-- Galerie Section -->
  <section id="galerie" class="gallery-section">
    <div class="container">
      <h2 class="section-title">Mes Œuvres</h2>
      
      @if (loading()) {
        <div class="loading">
          <div class="spinner"></div>
          <p>Chargement des œuvres...</p>
        </div>
      }

      @if (error()) {
        <div class="error-message">
          <p>{{ error() }}</p>
          <button (click)="loadArtworks()" class="btn-retry">Réessayer</button>
        </div>
      }

      @if (!loading() && !error()) {
        <div class="artworks-grid">
          @for (artwork of artworks(); track artwork._id) {
            @if (artwork.isAvailable === true) {
              <div class="artwork-card" (click)="openArtwork(artwork)">
                <div class="artwork-image">
                  <img 
                    [src]="getImageUrl(artwork.imageUrl)" 
                    [alt]="artwork.title" 
                    loading="lazy"
                    (error)="onImageError($event)"
                  >
                  <div class="artwork-overlay">
                    <h3>{{ artwork.title }}</h3>
                    @if (artwork.category) {
                      <p>{{ artwork.category }}</p>
                    }
                  </div>
                </div>
              </div>
            }
          } @empty {
            <div class="no-artworks">
              <p>Aucune œuvre disponible pour le moment</p>
            </div>
          }
        </div>
      }
    </div>
  </section>

  <!-- Contact Section -->
  <app-contact></app-contact>

  <!-- Modal pour afficher l'œuvre sélectionnée -->
  @if (selectedArtwork()) {
    <div class="modal-overlay" (click)="closeArtwork()">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <button class="close-btn" (click)="closeArtwork()">&times;</button>
        <div class="modal-grid">
          <div class="modal-image">
            <img [src]="getImageUrl(selectedArtwork()!.imageUrl)" [alt]="selectedArtwork()!.title">
          </div>
          <div class="modal-details">
            <h2>{{ selectedArtwork()!.title }}</h2>
            
            @if (selectedArtwork()!.year) {
              <p class="detail-item"><strong>Année:</strong> {{ selectedArtwork()!.year }}</p>
            }
            
            @if (selectedArtwork()!.category) {
              <p class="detail-item"><strong>Catégorie:</strong> {{ selectedArtwork()!.category }}</p>
            }
            
            @if (selectedArtwork()!.technique) {
              <p class="detail-item"><strong>Technique:</strong> {{ selectedArtwork()!.technique }}</p>
            }
            
            @if (selectedArtwork()!.dimensions) {
              <p class="detail-item"><strong>Dimensions:</strong> {{ selectedArtwork()!.dimensions }}</p>
            }
            
            @if (selectedArtwork()!.description) {
              <p class="description">{{ selectedArtwork()!.description }}</p>
            }
          </div>
        </div>
      </div>
    </div>
  }
</div>
